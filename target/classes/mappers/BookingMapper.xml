<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bowling.mapper.BookingMapper">


<select id="bookingDetail" resultMap="BookingVO">
SELECT 
COUNT(CASE WHEN TO_CHAR(BO_TIME, 'HH24') = '09' THEN '1' END) AS BOOKING9
,COUNT(CASE WHEN TO_CHAR(BO_TIME, 'HH24') = '10' THEN '1' END) AS BOOKING10
,COUNT(CASE WHEN TO_CHAR(BO_TIME, 'HH24') = '11' THEN '1' END) AS BOOKING11
,COUNT(CASE WHEN TO_CHAR(BO_TIME, 'HH24') = '12' THEN '1' END) AS BOOKING12
,COUNT(CASE WHEN TO_CHAR(BO_TIME, 'HH24') = '13' THEN '1' END) AS BOOKING13
,COUNT(CASE WHEN TO_CHAR(BO_TIME, 'HH24') = '14' THEN '1' END) AS BOOKING14
,COUNT(CASE WHEN TO_CHAR(BO_TIME, 'HH24') = '15' THEN '1' END) AS BOOKING15
,COUNT(CASE WHEN TO_CHAR(BO_TIME, 'HH24') = '16' THEN '1' END) AS BOOKING16
,COUNT(CASE WHEN TO_CHAR(BO_TIME, 'HH24') = '17' THEN '1' END) AS BOOKING17
,COUNT(CASE WHEN TO_CHAR(BO_TIME, 'HH24') = '18' THEN '1' END) AS BOOKING18
,COUNT(CASE WHEN TO_CHAR(BO_TIME, 'HH24') = '19' THEN '1' END) AS BOOKING19
,COUNT(CASE WHEN TO_CHAR(BO_TIME, 'HH24') = '20' THEN '1' END) AS BOOKING20
,COUNT(CASE WHEN TO_CHAR(BO_TIME, 'HH24') = '21' THEN '1' END) AS BOOKING21
,COUNT(CASE WHEN TO_CHAR(BO_TIME, 'HH24') = '22' THEN '1' END) AS BOOKING22
,COUNT(CASE WHEN TO_CHAR(BO_TIME, 'HH24') = '23' THEN '1' END) AS BOOKING23
FROM ALLEY A
LEFT JOIN BOOKING B ON A.ALLEY_SEQ = B.ALLEY_SEQ 
WHERE A.ALLEY_SEQ = #{alleySeq}
;
</select>


























<resultMap id="BookingVO" type="com.bowling.domain.vo.BookingVO">
	
      <result property="alleySeq" column="ALLEY_SEQ" />
      <result property="boNum" column="BO_NUM" />
      <result property="boTime" column="BO_TIME" />
      <result property="boDate" column="BO_DATE" />
      <result property="booking9" column="BOOKING9" />
      <result property="booking10" column="BOOKING10" />
      <result property="booking11" column="BOOKING11" />
      <result property="booking12" column="BOOKING12" />
      <result property="booking13" column="BOOKING13" />
      <result property="booking14" column="BOOKING14" />
      <result property="booking15" column="BOOKING15" />
      <result property="booking16" column="BOOKING16" />
      <result property="booking17" column="BOOKING17" />
      <result property="booking18" column="BOOKING18" />
      <result property="booking19" column="BOOKING19" />
      <result property="booking20" column="BOOKING20" />
      <result property="booking21" column="BOOKING21" />
      <result property="booking22" column="BOOKING22" />
      <result property="booking23" column="BOOKING23" />
      <result property="booking24" column="BOOKING24" />
   </resultMap>


</mapper>